---
import type { AuthUser } from '@portfolio/types'

import MainLayout from '~layouts/MainLayout.astro'
import { Welcome } from '~ui/Welcome'

const fakeUser = {
  id: '1',
  email: 'john.doe@example.com',
  createdAt: new Date(),
  updatedAt: new Date()
}

const users = await Promise.resolve([fakeUser])
const user = users[0] ?? (fakeUser as AuthUser)

const title = 'Basic Profile Page'
const mode = Astro.url.searchParams.get('mode') ?? 'display'
---

<MainLayout title={title}>
  <Welcome server:defer client:load title={title} user={user}>
    <section class='flex flex-col gap-4 text-lg'>
      <p>
        This page will be used to <a class='link' href='?mode=display'>display</a> the user's profile
        information
      </p>
      <p>
        This page will also be used to <a class='link' href='?mode=edit'>edit</a> the user's profile
        information.
      </p>
      <p class='font-bold'>Mode: {mode}</p>
    </section>
  </Welcome>
</MainLayout>
